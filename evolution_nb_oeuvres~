<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>ADONA oeuvres</title>
		<script type="text/javascript" src="http://d3js.org/d3.v3.min.js"></script>
		<script src="https://d3js.org/d3-geo.v1.min.js"></script>
		<script src="https://d3js.org/d3-geo-projection.v2.min.js"></script>
		<script src="js/d3.slider.js"></script><!-- http://github.com/turban/d3.slider -->
		<link rel="stylesheet" type="text/css" href="css/style.css">
		<link rel="stylesheet" type="text/css" href="css/d3.slider.css">
	</head>
    <body>
        <div id="map"></div>
        <div id="slider"></div>
        
        <script type="text/javascript">
            var w = 960;
            var h = 500;
        
            var svg = d3.select('#map')
                .append('svg')
                .attr('width', w)
                .attr('height', h);
                
            var projection = d3.geoRobinson()
                .scale(150);
                
            var path = d3.geo.path()
                .projection(projection);
                
            // adding countries from Natural Earth  
            d3.json('data/ne_110m_admin_0_countries.json', function (json) {
            	svg.selectAll('path')
            	   .data(json.features)
            	   .enter()
            	   .append('path')
            	   .attr('d', path)
            	   .attr('class', 'pays');
            });
            
            // adding ADONA sites
            d3.json('data/evolution_nb_oeuvres.json', function (json) {
            	svg.selectAll('circle')
            	   .data(json.features)
            	   .enter()
            	   .append('circle')
            	   .attr('r', 2)
            	   .attr('cx',function(d) { return projection(d.geometry.coordinates)[0]})
            	   .attr('cy',function(d) { return projection(d.geometry.coordinates)[1]})
            	   .attr('class', 'site');
            });
            
            d3.select('#slider')
                .call(d3.slider().axis(true).min(1910).max(2020).step(10)
                .on("slide", function (evt, value) {
            	console.log(text(value));
                })
            );
            
        </script>
    </body>
</html>